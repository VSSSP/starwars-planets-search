(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{13:function(e,t,a){e.exports=a.p+"static/media/starwars.b2d30e6d.png"},14:function(e,t,a){e.exports=a.p+"static/media/luke.00f28d83.png"},15:function(e,t,a){e.exports=a.p+"static/media/vader.5dc128ef.png"},21:function(e,t,a){e.exports=a(36)},26:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),c=a.n(l),u=(a(26),Object(n.createContext)()),s=a(20),o=a(2);function i(){var e=Object(n.useContext)(u).filterContext.filters,t=e.filterByNumericValues,a=e.setFilterByNumericValues,l=function(e){var n=e.target.name,r=t.filter((function(e){return e.column!==n}));a(r)};return r.a.createElement("div",null,t?t.map((function(e){var t=e.column,a=e.comparison,n=e.value;return r.a.createElement("div",{key:n,"data-testid":"filter"},r.a.createElement("p",{key:n},"".concat(t," ").concat(a," ").concat(n)),r.a.createElement("button",{name:t,onClick:l,type:"button"},"X"))})):null)}var m=a(6),f=a(8);function d(){var e=Object(n.useContext)(u).state.results,t=Object(n.useContext)(u).filterContext.filters,a=t.order,l=t.setOrder,c=t.result.results,s=function(e){var t=e.target,n=t.name,r=t.value;l(Object(f.a)(Object(f.a)({},a),{},Object(m.a)({},n,r)))},o=function(e){return/^-?\d+$/.test(e)};return"ASC"===a.sort&&c.sort((function(e,t){return o(e[a.column])?e[a.column]-t[a.column]:e[a.column].localeCompare(t[a.column])})),"DESC"===a.sort&&c.sort((function(e,t){return o(e[a.column])?t[a.column]-e[a.column]:t[a.column].localeCompare(e[a.column])})),r.a.createElement("div",{className:"numeric-filters-box2"},"Ordenar por:",r.a.createElement("select",{className:"select-filters","data-testid":"column-sort",onChange:s,name:"column"},Object.keys(e[0]).map((function(e){return"residents"!==e?r.a.createElement("option",{key:e},e):null}))),r.a.createElement("input",{className:"input-filters",type:"radio",name:"sort",value:"ASC","data-testid":"column-sort-input-asc",onChange:s}),"Ascendente",r.a.createElement("input",{className:"input-filters",type:"radio",name:"sort",value:"DESC","data-testid":"column-sort-input-desc",onChange:s}),"Descendente")}function p(){var e=Object(n.useContext)(u).filterContext.filters.filterByNumericValues,t=Object(n.useContext)(u).filterContext.filters,a=t.setColumn,l=t.setComparison,c=t.setValue,m=t.setFilterByNumericValues,f=t.numericValues,p=["population","orbital_period","diameter","rotation_period","surface_water"],b=Object(n.useState)(p),E=Object(o.a)(b,2),v=E[0],j=E[1],O=function(e){var t=e.target,n=t.name,r=t.value;"column"===n&&a(r),"comparison"===n&&l(r),"valor"===n&&c(r)};return r.a.createElement("div",{className:"numeric-filters"},r.a.createElement("div",{className:"numeric-filters-box1"},"Ordernar por:",r.a.createElement("select",{className:"select-filters",onChange:O,"data-testid":"column-filter",name:"column"},v.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),"Que seja:",r.a.createElement("select",{className:"select-filters","data-testid":"comparison-filter",name:"comparison",onChange:O},["maior que","menor que","igual a"].map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))),r.a.createElement("input",{type:"number","data-testid":"value-filter",name:"valor",onChange:O,placeholder:"Quantidade"}),r.a.createElement("button",{className:"button-filters",type:"button","data-testid":"button-filter",onClick:function(){var t=f.column,a=f.comparison,n=f.value;m([].concat(Object(s.a)(e),[{column:t,comparison:a,value:n}])),function(e){var t=p.filter((function(t){return t!==e}));j(t)}(t)}},"Filtrar")),r.a.createElement(d,null),r.a.createElement(i,null))}function b(){var e=Object(n.useContext)(u).filterContext.filters.filterByName.setName;return r.a.createElement("div",{className:"input-filter-box"},r.a.createElement("span",null,"Digite o nome do Planeta:"),r.a.createElement("input",{className:"input-filter","data-testid":"name-filter",type:"text",onChange:function(t){var a=t.target.value;e(a)}}))}function E(e){return e.planets.map((function(e){return r.a.createElement("tr",{key:e.name},r.a.createElement("td",{"data-testid":"planet-name"},e.name),r.a.createElement("td",null,e.rotation_period),r.a.createElement("td",null,e.orbital_period),r.a.createElement("td",null,e.diameter),r.a.createElement("td",null,e.climate),r.a.createElement("td",null,e.gravity),r.a.createElement("td",null,e.terrain),r.a.createElement("td",null,e.surface_water),r.a.createElement("td",null,e.population),r.a.createElement("td",null,e.films),r.a.createElement("td",null,e.created),r.a.createElement("td",null,e.edited),r.a.createElement("td",null,e.url))}))}function v(){var e=Object(n.useContext)(u),t=e.state.results,a=e.filterContext.filters,l=a.filterByName.name,c=a.filterByNumericValues;return r.a.createElement(E,{planets:l?t.filter((function(e){return e.name.toLowerCase().includes(l.toLowerCase())})):c.length>0?c.reduce((function(e,a){var n=a.comparison,r=a.column,l=a.value;return"maior que"===n&&(e=t.filter((function(e){return Number(e[r])>Number(l)}))),"menor que"===n&&(e=t.filter((function(e){return Number(e[r])<Number(l)}))),"igual a"===n&&(e=t.filter((function(e){return Number(e[r])===Number(l)}))),e}),[t]):t})}function j(){var e=Object(n.useContext)(u).state.results;return r.a.createElement("tr",null,Object.keys(e[0]).map((function(e){return"residents"!==e?r.a.createElement("th",{key:e},e):null})))}var O=a(13),C=a.n(O),N=a(14),x=a.n(N),g=a(15),y=a.n(g);function h(){return Object(n.useContext)(u).loading?r.a.createElement("h1",null,"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"filters"},r.a.createElement(b,null),r.a.createElement(p,null)),r.a.createElement("div",{className:"table-logos"},r.a.createElement("img",{className:"starwars-chars luke",src:x.a,alt:"luke"}),r.a.createElement("div",{className:"starwarsbox"},r.a.createElement("img",{src:C.a,alt:"starwarslogo",className:"starwarslogo"}),r.a.createElement("h2",{className:"table-title"},"PLANETS SEARCH")),r.a.createElement("img",{className:"starwars-chars vader",src:y.a,alt:"vader"})),r.a.createElement("div",{className:"row"},r.a.createElement("table",{id:"example",class:"table table-striped table-bordered",style:{width:"100%"}},r.a.createElement(j,null),r.a.createElement(v,null))))}function k(){return r.a.createElement(h,null)}var w=a(9),S=a.n(w),B=a(16);var V=function(e){var t=e.children,a=Object(n.useState)([]),l=Object(o.a)(a,2),c=l[0],s=l[1],i=Object(n.useState)(!0),m=Object(o.a)(i,2),f=m[0],d=m[1],p=Object(n.useState)(""),b=Object(o.a)(p,2),E=b[0],v=b[1],j=Object(n.useState)("population"),O=Object(o.a)(j,2),C=O[0],N=O[1],x=Object(n.useState)("maior que"),g=Object(o.a)(x,2),y=g[0],h=g[1],k=Object(n.useState)(0),w=Object(o.a)(k,2),V=w[0],A=w[1],_=Object(n.useState)([]),q=Object(o.a)(_,2),F=q[0],D=q[1],L=Object(n.useState)({column:"name",sort:"ASC"}),P=Object(o.a)(L,2),J=P[0],Q=P[1],H=Object(n.useState)([]),I=Object(o.a)(H,2),R=I[0],T=I[1],X={filters:{filterByName:{name:E,setName:v},filterByNumericValues:F,numericValues:{column:C,comparison:y,value:V},order:J,result:R,setOrder:Q,setColumn:N,setComparison:h,setValue:A,setFilterByNumericValues:D}};return Object(n.useEffect)((function(){d(!0),function(){var e=Object(B.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://swapi-trybe.herokuapp.com/api/planets/").then((function(e){return e.json()}));case 2:t=e.sent,s(t),T(t),d(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),r.a.createElement(u.Provider,{value:{state:c,loading:f,filterContext:X}},t)},A=a(19);var _=function(){return r.a.createElement(A.a,{basename:"/starwars-planets-search"},r.a.createElement(V,null,r.a.createElement(k,null)))};c.a.render(r.a.createElement(_,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.a572b837.chunk.js.map