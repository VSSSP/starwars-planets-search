(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{11:function(e,t,n){e.exports=n(18)},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(8),u=n.n(l),c=(n(16),Object(a.createContext)()),o=n(10),i=n(1);function m(){var e=Object(a.useContext)(c).filterContext.filters,t=e.filterByNumericValues,n=e.setFilterByNumericValues,l=function(e){var a=e.target.name,r=t.filter((function(e){return e.column!==a}));n(r)};return r.a.createElement("div",null,t?t.map((function(e){var t=e.column,n=e.comparison,a=e.value;return r.a.createElement("div",{key:a,"data-testid":"filter"},r.a.createElement("p",{key:a},"".concat(t," ").concat(n," ").concat(a)),r.a.createElement("button",{name:t,onClick:l,type:"button"},"X"))})):null)}var s=n(4),f=n(5);function d(){var e=Object(a.useContext)(c).state.results,t=Object(a.useContext)(c).filterContext.filters,n=t.order,l=t.setOrder,u=t.result.results,o=function(e){var t=e.target,a=t.name,r=t.value;l(Object(f.a)(Object(f.a)({},n),{},Object(s.a)({},a,r)))},i=function(e){return/^-?\d+$/.test(e)};return"ASC"===n.sort&&u.sort((function(e,t){return i(e[n.column])?e[n.column]-t[n.column]:e[n.column].localeCompare(t[n.column])})),"DESC"===n.sort&&u.sort((function(e,t){return i(e[n.column])?t[n.column]-e[n.column]:t[n.column].localeCompare(e[n.column])})),r.a.createElement("div",null,r.a.createElement("select",{"data-testid":"column-sort",onChange:o,name:"column"},Object.keys(e[0]).map((function(e){return"residents"!==e?r.a.createElement("option",{key:e},e):null}))),r.a.createElement("input",{type:"radio",name:"sort",value:"ASC","data-testid":"column-sort-input-asc",onChange:o}),"Ascendente",r.a.createElement("input",{type:"radio",name:"sort",value:"DESC","data-testid":"column-sort-input-desc",onChange:o}),"Descendente",r.a.createElement("button",{type:"button","data-testid":"column-sort-button"}," Ordenar "))}function p(){var e=Object(a.useContext)(c).filterContext.filters.filterByNumericValues,t=Object(a.useContext)(c).filterContext.filters,n=t.setColumn,l=t.setComparison,u=t.setValue,s=t.setFilterByNumericValues,f=t.numericValues,p=["population","orbital_period","diameter","rotation_period","surface_water"],b=Object(a.useState)(p),E=Object(i.a)(b,2),v=E[0],j=E[1],O=function(e){var t=e.target,a=t.name,r=t.value;"column"===a&&n(r),"comparison"===a&&l(r),"valor"===a&&u(r)};return r.a.createElement("div",null,r.a.createElement("select",{onChange:O,"data-testid":"column-filter",name:"column"},v.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("select",{"data-testid":"comparison-filter",name:"comparison",onChange:O},["maior que","menor que","igual a"].map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))),r.a.createElement("input",{type:"number","data-testid":"value-filter",name:"valor",onChange:O}),r.a.createElement("button",{type:"button","data-testid":"button-filter",onClick:function(){var t=f.column,n=f.comparison,a=f.value;s([].concat(Object(o.a)(e),[{column:t,comparison:n,value:a}])),function(e){var t=p.filter((function(t){return t!==e}));j(t)}(t)}},"Filtrar"),r.a.createElement(d,null),r.a.createElement(m,null))}function b(){var e=Object(a.useContext)(c).filterContext.filters.filterByName.setName;return r.a.createElement("div",null,r.a.createElement("input",{"data-testid":"name-filter",type:"text",onChange:function(t){var n=t.target.value;e(n)}}))}function E(e){return e.planets.map((function(e){return r.a.createElement("tr",{key:e.name},r.a.createElement("td",{"data-testid":"planet-name"},e.name),r.a.createElement("td",null,e.rotation_period),r.a.createElement("td",null,e.orbital_period),r.a.createElement("td",null,e.diameter),r.a.createElement("td",null,e.climate),r.a.createElement("td",null,e.gravity),r.a.createElement("td",null,e.terrain),r.a.createElement("td",null,e.surface_water),r.a.createElement("td",null,e.population),r.a.createElement("td",null,e.films),r.a.createElement("td",null,e.created),r.a.createElement("td",null,e.edited),r.a.createElement("td",null,e.url))}))}function v(){var e=Object(a.useContext)(c),t=e.state.results,n=e.filterContext.filters,l=n.filterByName.name,u=n.filterByNumericValues;return r.a.createElement(E,{planets:l?t.filter((function(e){return e.name.toLowerCase().includes(l.toLowerCase())})):u.length>0?u.reduce((function(e,n){var a=n.comparison,r=n.column,l=n.value;return"maior que"===a&&(e=t.filter((function(e){return Number(e[r])>Number(l)}))),"menor que"===a&&(e=t.filter((function(e){return Number(e[r])<Number(l)}))),"igual a"===a&&(e=t.filter((function(e){return Number(e[r])===Number(l)}))),e}),[t]):t})}function j(){var e=Object(a.useContext)(c).state.results;return r.a.createElement("tr",null,Object.keys(e[0]).map((function(e){return"residents"!==e?r.a.createElement("th",{key:e},e):null})))}function O(){return Object(a.useContext)(c).loading?r.a.createElement("h1",null,"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement(b,null),r.a.createElement(p,null),r.a.createElement("table",null,r.a.createElement(j,null),r.a.createElement(v,null)))}function C(){return r.a.createElement(O,null)}var y=n(6),x=n.n(y),h=n(9);var g=function(e){var t=e.children,n=Object(a.useState)([]),l=Object(i.a)(n,2),u=l[0],o=l[1],m=Object(a.useState)(!0),s=Object(i.a)(m,2),f=s[0],d=s[1],p=Object(a.useState)(""),b=Object(i.a)(p,2),E=b[0],v=b[1],j=Object(a.useState)("population"),O=Object(i.a)(j,2),C=O[0],y=O[1],g=Object(a.useState)("maior que"),N=Object(i.a)(g,2),k=N[0],S=N[1],w=Object(a.useState)(0),B=Object(i.a)(w,2),V=B[0],_=B[1],q=Object(a.useState)([]),F=Object(i.a)(q,2),A=F[0],D=F[1],L=Object(a.useState)({column:"name",sort:"ASC"}),J=Object(i.a)(L,2),I=J[0],P=J[1],X=Object(a.useState)([]),$=Object(i.a)(X,2),z=$[0],G=$[1],H={filters:{filterByName:{name:E,setName:v},filterByNumericValues:A,numericValues:{column:C,comparison:k,value:V},order:I,result:z,setOrder:P,setColumn:y,setComparison:S,setValue:_,setFilterByNumericValues:D}};return Object(a.useEffect)((function(){d(!0),function(){var e=Object(h.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://swapi-trybe.herokuapp.com/api/planets/").then((function(e){return e.json()}));case 2:t=e.sent,o(t),G(t),d(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),r.a.createElement(c.Provider,{value:{state:u,loading:f,filterContext:H}},t)};var N=function(){return r.a.createElement(g,null,r.a.createElement(C,null))};u.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.9609995e.chunk.js.map